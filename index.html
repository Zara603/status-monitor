<html>
    <head>
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

        <link href="styles.css" rel="stylesheet" type="text/css"/>


    </head>
    <body>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="handlebars-v4.0.5.js"></script>
                <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script id="template" type="text/x-handlebars-template" >
            <h1>Oscar Winter Environments</h1>
                <div class="environment-container">                    
                    <div class="row">   
                        {{#each this}}                    
                        <div class="col-xs-12 col-md-4">
                            <div class="panel panel-default">
                              <div class="panel-heading">{{this.name}}</div>
                              <div class="panel-body">
                                  <div><a href="{{this.siteUrl}}">Site</a></div>
                                  <div><a href="{{this.backofficeUrl}}">Backoffice</a></div>
                                  <h2 class="status status-{{this.current.status}}">{{this.current.status}}</h2>
                                  <div>
                                      <span>Build:</span>
                                      <span>{{this.current.version.build}}</span>
                                  </div>
                                  <div>
                                    <span>Branch:</span>
                                    <span>{{this.current.version.branch}}</span>
                                  </div>
                                  <div>
                                    <span>Hash:</span>
                                    <span>{{this.current.version.hash}}</span>
                                  </div>
                                  <div>
                                      <span>Built:</span>
                                      <span>{{this.current.version.buildTime}}</span>
                                  </div>
                                  <div>
                                    <h3>Deployments</h3>
                                  </div>
                              </div>
                                <table class="table">
                                <tr class="header">
                                    <th>Build#</th>
                                    <th>Branch</th>
                                    <th>Time</th>
                                </tr>
                                {{#each deploys}}
                                <tr class="{{this.result}}">                    
                                    <td><a href="{{this.link}}">{{this.deployed}}</a></td>
                                    <td>{{this.branch}}</td>
                                    <td>{{this.timeString}}</td>
                                </tr>
                                {{/each}}
                                </table>



                            </div>                             
                        </div>
                       {{/each}}    
                    </div>
                </div>
        </script>
        <script src="status.js"></script>
        <div id='status'>
        </div>
        <script>
            var source = $("#template").html();
            var template = Handlebars.compile(source);
            var rendered = template(data);
            $('#status').html(rendered);
        </script>
    </body>
</html>           